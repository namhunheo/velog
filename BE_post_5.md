[백엔드] 개발_총정리#5 (API)

> - 포인트
	1. API 개념
    2. API 유형
    3. API 명세서
    
---
### 1. API 개념
> ** API (Application Programming Interface)**
: 응용 프로그램에서 사용할 수 있도록 운영 체제나 프로그래밍 언어가 제공하는 기능을 제어하기 위한 인터페이스*
: 쉽게 말하면 응용 프로그램들 사이의 통신을 가능케 하는 것

(인터페이스 : 여러 장치나 프로그램 사이에서 통신이 가능하도록 도와주는 매개체)

![](https://velog.velcdn.com/images/huni6711/post/85e9562c-90e3-4ada-9fbe-3c4eb67e8f35/image.png)
^ 클라이언트와 서버는 API를 호출해 요청과 응답을 주고 받음.
클라이언트가 API를 호출해 필요한 데이터를 서버에 요청하면, 서버는 DB에서 데이터를 처리한 후 그 결과를 클라이언트에 응답.
**
>- API 개발순서**
	**1. 엔드포인트 설계**
   	: 요청을 보낼 서버의 주소를 설정하고 어떤 API를 요청할지 최종 엔드포인트 정의 (EX. www.google.co.kr**/search**)
	**2. HTTP 메소드 지정**
    : 각 엔드포인트에 요청할 HTTP 메소드 지정.
    : HTTP 메소드는 클라이언트가 서버로 보내는 요청의 종류로, (POST, GET, PUT, PATCH, DELETE)가 있음.
	**3. 데이터 포맷 및 프로토콜 선택**
    : API에서 사용할 데이터 포맷, 즉 주고받을 데이터의 형태와 통신에 사용할 프로토콜 선택
    : 일반적으로 데이터 포맷은 - JSON, 프로토콜 - RESTful
    **4. 엔드포인트 구현**
    : 각 엔드포인트로 접수된 클라이언트의 요청을 처리하는 서버 측 로직 구현, 클라이언트의 요청을 받으면 DB에 접근해 데이터를 가져와 가공하고, 이를 클라이언트에 반환하는 로직 만듬
    **5. 인증 및 보안**
    **6. 오류 및 예외 처리**
    **7. 테스트와 디버깅**
    **8. API 문서화**
    
    
-----
### 2. API 유형(REST API / GraphQL)
>- REST API
	2.1. 자원
    : REST API는 클라이언트와 서버가 주고받는 자원을 URI*로 명시
    

(URI - URL보다 상위 개념, 특정 자원 자체를 의미 / URL - 웹상에서 자원이 있는 곳의 위치)

|         URI 구성 요소        | 예시                 | 설명                                       |
| :------------------: | :----------------- | :--------------------------------------- |
|   **Scheme (프로토콜)**  | `https://`         | 자원에 접근하는 방식 — `http`, `https`, `ftp` 등   |
|    **Host (호스트)**    | `api.example.com`  | 서버의 도메인 이름 또는 IP 주소                      |
|     **Port (포트)**    | `:443`             | 선택 요소, 통신 포트 번호 (`80`=HTTP, `443`=HTTPS) |
|     **Path (경로)**    | `/users/1`         | 자원의 위치 — REST API에서는 **명사형 자원명**         |
|  **Query (쿼리 문자열)**  | `?page=2&limit=10` | 추가 파라미터 전달 (필터, 검색, 페이징 등)               |
| **Fragment (프래그먼트)** | `#section1`        | 문서 내 특정 위치(클라이언트 전용, 서버로 전송 X)           |


> 2.2. 행위

|     CRUD 행위     |      HTTP 메서드     | 역할                   | 예시                            |
| :-----------------: | :---------------: | :------------------- | :----------------------- |
|   **조회**   |       `GET`       | 자원 읽기(Read)          | `GET /users` → 사용자 목록 조회      |
|   **생성**   |       `POST`      | 새 자원 추가(Create)      | `POST /users` → 새 사용자 등록      |
| **수정(전체)** |       `PUT`       | 기존 자원 전체 갱신(Update)  | `PUT /users/1` → 사용자 정보 전체 수정 |
| **수정(부분)** |      `PATCH`      | 기존 자원의 일부 수정         | `PATCH /users/1` → 이메일만 변경    |
|   **삭제**   |      `DELETE`     | 자원 제거(Delete)        | `DELETE /users/1` → 사용자 삭제    |
|   **기타**   | `HEAD`, `OPTIONS` | 메타데이터 조회 / 지원 메서드 확인 | `HEAD /users`                 |



-----
### 3. REST API 특징 및 설계 규칙

> 3.1. REST API 특징
 : HTTP 요청 메세지만 보고도 어떤 동작이나 정보를 요청하는지 쉽게 이해 가능
 >> - HTTP 요청 메세지 예시
: POST / users HTTP / 1.1
{
	"name" : "남훈"
}


> 3.2. REST API 설계 규칙
	- URI에 명사 사용
    - 자원의 계층 관계를 /로 나타냄
    - 마지막에 /를 넣지 않음
    - 명사와 명사를 구분할 때 -을 사용
    - 소문자만 사용
    - 파일 확장자를 포함X
    - 적절한 HTTP 상태 코드를 응답
    
> API별 세부 명세 작성 내용

|            구분           | 설명                            | 예시                                                                                       | 핵심 요약                             |
| :---------------------: | :---------------------------- | :--------------------------------------------------------------------------------------- | :-------------------------------- |
|        **Method**       | 수행할 **행위(HTTP 메서드)**          | `GET`, `POST`, `PUT`, `PATCH`, `DELETE`                                                  | 자원에 대한 동작(조회, 생성, 수정, 삭제) 정의      |
|        **Header**       | 요청/응답 시 포함되는 **메타데이터**        | `Content-Type: application/json`<br>`Authorization: Bearer token`                        | 인증, 데이터 형식, 요청 정보 등 전달            |
|         **Body**        | 요청 시 전송되는 **데이터 내용**          | `json<br>{ "name": "Namhun", "age": 26 }<br>`                                            | 주로 `POST`, `PUT`, `PATCH` 요청에서 사용 |
|     **Query String**    | URL 뒤에 붙는 **검색/필터 파라미터**      | `/users?page=2&limit=10`                                                                 | 데이터 조회 시 조건 전달 (`?key=value`)     |
|    **Path Variable**    | URI 경로에 포함된 **동적 변수**         | `/users/{id}` → `/users/1`                                                               | 특정 자원 식별용 값                       |
| **Response Parameters** | 응답 시 반환되는 **데이터 구조**          | `json<br>{ "id": 1, "name": "Namhun" }<br>`                                              | 서버가 클라이언트에 전달하는 결과 값              |
|   **Response Sample**   | 실제 응답 예시 (샘플 JSON)            | `json<br>{ "status": "success", "data": { "id": 1 } }<br>`                               | 응답 구조를 시각적으로 제시                   |
|     **Result Code**     | 요청 처리 결과를 나타내는 **HTTP 상태 코드** | `200 OK`, `201 Created`, `400 Bad Request`, `404 Not Found`, `500 Internal Server Error` | 요청 성공/실패 여부 및 원인 표시               |


---
### 4. 오픈 API : 스웨거
> https://swagger.io/

> ** 스웨거란?**
: 오픈 API는 REST API를 문서화하기 위한 공개 표준으로, REST API 명세서를 작성하는 포맷을 제공
: API를 개발, 관리, 문서화하는데 도움을 주며, 대표적으로 스웨거가 있음


>**스웨거 특징**
	1. 자동으로 API 명세서 생성, 스웨거 UI를 통해 API 명세서를 시각적으로 구조화해줌
    2. 프론트 개발자가 실시간으로 업데이트된 API 문서를 확인하고 각 API의 기능, API 요청 시 전달되는 매개변수, 응답 데이터의 형식을 쉽게 이해 가능
    3. API 명세서를 토대로 API 테스트 가능


![](https://velog.velcdn.com/images/huni6711/post/76ba0c3d-80b8-4940-808e-a2467be59452/image.png)

----

- 이미지 출처
https://velog.io/@chanmi125/02.1-HTTPHTTPS%EC%99%80-REST-API-%EC%84%9C%EB%B2%84-%EA%B0%84-%ED%86%B5%EC%8B%A0